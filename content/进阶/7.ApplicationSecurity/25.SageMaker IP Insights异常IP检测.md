---
title: "使用SageMaker IP Insights算法实现基于机器学习的异常IP检测"
chapter: false
weight: 72
tags:
  - advanced
---

## AWS SageMaker IP Insights 算法介绍

Amazon SageMaker IP Insights 算法使用统计建模和神经网络来捕获在线资源（例如账户 ID 或主机名）与 IPv4 地址之间的关联。 底层实现上，它学习资源和 IP 地址的向量表示。 这实质上意味着，如果表示 IP 地址和资源的向量靠近在一起，那么该 IP 地址很可能访问该资源，即使IP地址之前从未访问过该资源。

在本实验中，将通过CloudFormation部署一个SageMaker Notebook，按照Notebook的步骤完成实验。
在notebok中，将手动生成用户使用IP地址访问资源的数据，使用 Amazon SageMaker IP Insights 算法来训练模型。 然后我们使用这个模型对数据进行推理并展示如何发现异常。

## 创建 SageMaker Notebook
首先点击以下**Launch Template**链接，利用 CloudFormation 创建一个SageMaker Notebook。

[Launch Template](https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-1#/stacks/new?stackName=SageMakerIPInsightsDemo&templateURL=https://hxh-public.s3-ap-northeast-1.amazonaws.com/IPInsightsDemo.yaml)

创建完成后，进入 SageMaker 控制台 -- 笔记本 -- IPInsightsDemo笔记本实例 -- 打开Jupyter Lab 进入笔记本实例。

![](/images/7.ApplicationSecurity/IPInsights-1.png)

实例中已自动下载好`SageMaker-IPInsights-Demo.ipynb`的Notebook，双击打开，选择Conda_Python3作为Kernel。

![](/images/7.ApplicationSecurity/IPInsights-2.png)

按照笔记本中的步骤完成实验：
  1. 介绍
  2. 准备数据
  3. 数据处理
  4. 模型训练
  5. 模型部署和推理
  6. 计算异常Threshold
  7. (Optional) 自动超参数调优
  8. (Optional) 批量推理
  9. 删除模型部署
