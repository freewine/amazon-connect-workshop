---
title: "对数据进行加密"
chapter: false
weight: 43


---

## 对数据进行加密

### 新建S3存储桶并启用数据加密

所有上传至存储桶的对象将会被加密存储，对用户完全透明。

1. 确定要保护的存储桶
打开S3控制台，并找到前面创建的存储桶：<你的姓名拼音首字母>-secworkshop：https://s3.console.aws.amazon.com/s3/home?region=ap-northeast-1#

2. 点击该存储桶以后，选择“属性”页面，找到“默认加密”部分，点击【编辑】按钮。
   - 服务器端加密：启用
   - 加密密钥类型：选择AWS Key Management Service密钥(SSE-KMS)
   - AWS KMS密钥：选择从KMS主密钥中选择
   - KMS主密钥：选择在上一步”创建KMS密钥“中创建的密钥
    点击【创建存储桶】按钮完成创建
   - 存储桶密钥：选择“启用”
   点击【保存修改】按钮
   
   ![](/images/4.DataProtection/4.3.1.png)
3. 测试存储桶，向新建的存储桶中上传和下载对象进行测试

### 新建EBS卷并启用加密

1. 打开EC2 卷控制台https://ap-northeast-1.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-1#Volumes: ，点击【创建卷】按钮。
2. 在新建页面中，选择如下选项：

   - 加密：勾选加密此卷
   - 主密钥：选择在“创建KMS密钥”中创建的密钥
   - 添加标签：
     - 键：Name
     - 值：您自定义的卷名称

   ![](/images/4.DataProtection/4.3.2.png)
   
点击【创建卷】按钮完成创建过程。  
3. 将卷挂载至EC2实例

   - 在卷列表中勾选刚刚创建的卷，**操作**菜单中选择**连接卷**

     ![](/images/4.DataProtection/4.3.3.png)

   - 选择要挂载的EC2实例，如：BastionInstance，点击【附加】按钮。

     ![](/images/4.DataProtection/4.3.4.png)

   - 在登录至EC2实例，完成对卷进行分区与格式化之后，即可使用该卷。

### 新建RDS数据库实例并启用加密

​	启用加密之后，所有存储在本RDS实例中的数据，均会被加密存储，包括自动或手动备份的快照数据。

1. 打开RDS控制台：https://ap-northeast-1.console.aws.amazon.com/rds/home?region=ap-northeast-1#， 点击【创建数据库】
2. 在向导中选择如下选项：
   - 创建方法：标准创建
   
   - 引擎选项：Aurora
   
   - 版本：兼容 MySQL 的 Amazon Aurora
   
   - 设置选项中，添加**数据库集群标识符**， **主用户名**，**主密码**， **确认密码**
   
   - 连接选项中：
     - Virtual Private Cloud (VPC)：选择本实验中所创建的VPC，如：SecWorkshopVPC
     
     - VPC安全组：选择**新建**，并输入安全组的名称
     
     ![](/images/4.DataProtection/4.3.5.png)
     
   - 展开其他配置选项：
     - 数据库集群参数组：选择在部署应用时所创建的参数组，如：app-dbparametergroup-xxxxxx
     - 加密：
       - 勾选启用加密
       - 主密钥：选择在“创建KMS密钥”中创建的密钥
       
       ![](/images/4.DataProtection/4.3.6.png)
   
   - 点击【创建数据库】完成RDS实例的创建。
   
     

